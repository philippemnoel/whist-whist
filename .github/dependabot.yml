# dependabot.yml
#
# Configuration file for Dependabot on the fractal/fractal monorepository.

# Note: Dependabot does not support globbing as the writing of this file. As
# a result, this configuration file is structured on a per-subrepo basis and
# dependency package manager files are provided explicitly.

version: 2

updates:
  ################### GitHub Actions ##################

  - package-ecosystem: "github-actions"
    directory: "/" # default location of `.github/workflows`
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  #####################################################
  ################ Client-Applications ################

  - package-ecosystem: "npm"
    directory: "/client-applications/desktop" # looks for package.json and [package-lock/yarn].lock file in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  #####################################################
  ################## Container-Images #################

  - package-ecosystem: "docker"
    directory: "/container-images/base" # looks for Dockerfile in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  - package-ecosystem: "docker"
    directory: "/container-images/browsers/chrome" # looks for Dockerfile in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  - package-ecosystem: "docker"
    directory: "/container-images/browsers/firefox" # looks for Dockerfile in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  - package-ecosystem: "docker"
    directory: "/container-images/creative/blender" # looks for Dockerfile in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  #####################################################
  ################## ECS-Host-Service #################

  # Dependabot is currently disabled for the host service because the host
  # service itself has only standard library dependencies. The other
  # dependencies are pulled in by the ecs-agent, which we are deprecating as
  # soon as possible, and unfortunately updating those dependencies causes the
  # host service not to compile anymore, and fixing the issues would take too
  # much energy to be worth it for now. Once the webserver refactor is done, we
  # can revisit this.

  #  - package-ecosystem: "gomod"
  #    directory: "/ecs-host-service" # looks for go.mod and go.sum in this directory
  #    schedule:
  #      interval: "monthly" # runs on the first day of each month
  #    open-pull-requests-limit: 10

  #####################################################
  ################### Main-Webserver ##################

  - package-ecosystem: "pip"
    directory: "/main-webserver" # looks for requirements.txt in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  - package-ecosystem: "pip"
    directory: "/main-webserver/db_migration" # looks for requirements.txt in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  - package-ecosystem: "pip"
    directory: "/main-webserver/scripts" # looks for requirements.txt in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  - package-ecosystem: "pip"
    directory: "/main-webserver/analytics" # looks for requirements.txt in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  - package-ecosystem: "docker"
    directory: "/main-webserver/docker" # looks for Dockerfile in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  #####################################################
  ###################### Protocol #####################

  - package-ecosystem: "docker"
    directory: "/protocol" # looks for Dockerfile in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  #####################################################
  ###################### Website ######################

  - package-ecosystem: "npm"
    directory: "/website" # looks for package.json and [package-lock/yarn].lock file in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  #####################################################
  ###################### Core-ts ######################

  - package-ecosystem: "npm"
    directory: "/core-ts" # looks for package.json and [package-lock/yarn].lock file in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  #####################################################
  ############## GitHub Workflow Helpers ##############

  - package-ecosystem: "pip"
    directory: "/.github/workflows/helpers" # looks for requirements.txt in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  - package-ecosystem: "pip"
    directory: "/.github/workflows/helpers/notifications" # looks for requirements.txt in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  - package-ecosystem: "pip"
    directory: "/.github/workflows/helpers/aws" # looks for requirements.txt in this directory
    schedule:
      interval: "monthly" # runs on the first day of each month
    open-pull-requests-limit: 10

  #####################################################
