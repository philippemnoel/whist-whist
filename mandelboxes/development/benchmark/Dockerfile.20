# See stage 0 of the base dockerfile for an explanation of this build stage.
ARG BuildAssetPackage "protocol"
FROM fractal/build-assets:$BuildAssetPackage as build-assets
FROM fractal/browsers/chrome:current-build as fractal-dev-benchmark

# Copies the video file, html file to enable looping, and the benchmark start-chrome
RUN curl https://fractal-test-assets.s3.amazonaws.com/bbb-1080p-75.mp4 -o /home/fractal/bbb-1080p.mp4
COPY 1080p_60fps.html /home/fractal/1080p_60fps.html
COPY start-chrome.sh /usr/bin/start-chrome
RUN chmod +x /usr/bin/start-chrome

# Install Whist Protocol binaries and helper files (if necessary)
COPY --from=build-assets protocol/* /usr/share/fractal/bin/
