{
  "environments": {
    "review": {
      "addons": [
        {
          "plan": "redisgreen:dev",
          "as": "REDIS"
        },
        {
          "plan": "heroku-postgresql:standard-0",
          "as": "POSTGRES_EPHEMERAL_DB",
          "options": {
            "version": "12"
          }
        }
      ],
      "buildpacks": [
        {
          "url": "https://github.com/fractal/subdir-heroku-buildpack.git"
        },
        {
          "url": "https://github.com/heroku/heroku-buildpack-inline.git"
        },
        {
          "url": "https://github.com/heroku/heroku-buildpack-awscli.git"
        },
        {
          "url": "heroku/python"
        }
      ],
      "env": {
        "PROJECT_PATH": {
          "description": "Path of the webserver project relative to monorepo root.",
          "value": "main-webserver"
        },
        "OAUTHLIB_RELAX_TOKEN_SCOPE": {
          "description": "Don't raise an exception if the requested and granted scopes differ.",
          "value": "1"
        }
      }
    },
    "test": {
      "addons": [
        {
          "plan": "heroku-redis:in-dyno",
          "as": "REDIS"
        },
        {
          "plan": "heroku-postgresql:standard-0",
          "as": "POSTGRES_EPHEMERAL_DB",
          "options": {
            "version": "12"
          }
        }
      ],
      "scripts": {
        "test-setup": "echo '{}' > client_secret.json",
        "test": "cd tests && bash run_tests.sh"
      }
    }
  }
}
